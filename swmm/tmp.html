<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.11: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7614 2013-02-21 15:55:51Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<p>['examples/simple/<em>.inp', 'examples/simple/</em>.py', 'examples/simple/<em>.INP', 'examples/simple/</em>.PY']
SWMM5 Python calling interface
(c) Assela Pathirana
Released under GNU GPL v.3</p>
<div class="section" id="release-history">
<h1>Release History:</h1>
<p>version 1.0.0.1 first production (non-beta) release.</p>
<p>version 1.1.0.1 version with new SWMM 5.1 version (instead of SWMM 5.0)</p>
</div>
<div class="section" id="installation">
<h1>Installation:</h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Windows:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>As of version 1.0.0.1 SWMM5 is verified to work with Python 3 as well.</p>
<p>Now (as of version 1.0.0.1) the package is provided as python Wheel too. This means for windows the following command should install SWMM5</p>
<pre class="literal-block">
pip install SWMM5
</pre>
<p>Alternatively, use the SWMM5-x.y.z.k.win32.exe file downloaded from the repository for click and install.</p>
<p>If you have your own C compilers, then  SWMM5-x.y.z.k.zip can be used to install as</p>
<pre class="literal-block">
python setup.py install
</pre>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Linux:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Download SWMM5-x.y.z.k.zip can be used to install as</p>
<pre class="literal-block">
python setup.py install
</pre>
<p>Or, just with,</p>
<pre class="literal-block">
pip install SWMM5
</pre>
</div>
<div class="section" id="usage">
<h1>Usage:</h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">New Interface:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>One should always use the new interface. The old interface (below) is left only for backward compatibility. The key features of new interface are</dt>
<dd><blockquote class="first">
<ul class="simple">
<li>More pythonic interface</li>
<li>A number of convienience functions</li>
</ul>
</blockquote>
<p class="last">Import new interface and run SWMM</p>
</dd>
</dl>
<pre class="literal-block">
&gt;&gt;&gt; from swmm5.swmm5tools import SWMM5Simulation
&gt;&gt;&gt; st=SWMM5Simulation(&quot;swmm5/examples/simple/swmm5Example.inp&quot;)
</pre>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Example 1:</th><td class="field-body">Retrive simulation properties.</td>
</tr>
</tbody>
</table>
<pre class="literal-block">
&gt;&gt;&gt; st.SWMM5_Version()          # Version of underlying SWMM5 engine.
'5.1.000'
&gt;&gt;&gt; st.SWMM5_VERSION            # same thing as an integer
51000
&gt;&gt;&gt; st.Flow_Units()           # Flow units.
'LPS'
&gt;&gt;&gt; st.SWMM_FlowUnits         # returns flow units as an index.  0 = CFS, 1 = GPM, 2 = MGD, 3 = CMS, 4 = LPS, and 5 = LPD
4
&gt;&gt;&gt; st.SWMM_Nperiods          # number of reporting periods
360
&gt;&gt;&gt; st.SWMM_Nsubcatch         # number of subcatchments
6
&gt;&gt;&gt; st.SWMM_Nnodes            # number of drainage system nodes
12
&gt;&gt;&gt; st.SWMM_Nlinks            # number of drainage system links
11
&gt;&gt;&gt; st.SWMM_Npolluts          # number of pollutants tracked
0
&gt;&gt;&gt; print (&quot;%.2f&quot;%st.SWMM_StartDate)  # start date of simulation
40844.00
&gt;&gt;&gt; st.SWMM_ReportStep
60
&gt;&gt;&gt;
</pre>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Example 2:</th><td class="field-body">Prints available entities</td>
</tr>
</tbody>
</table>
<pre class="literal-block">
&gt;&gt;&gt; st.entityList()
['SUBCATCH', 'NODE', 'LINK', 'SYS']
&gt;&gt;&gt; st.Subcatch()
['A2', 'A1', 'A3', 'A4', 'A5', 'E1']
&gt;&gt;&gt; st.Node()
['J1', 'J2', 'J3', 'J4', 'J5', 'J6', 'J7', 'J8', 'J9', 'J10', 'J11', 'J12']
&gt;&gt;&gt; st.Link()
['T4-1', 'T4-2', 'T4-3', 'T1-1', 'T1-2', 'T2-1', 'T2-2', 'T2-3', 'T3-1', 'T3-2', 'T5']
&gt;&gt;&gt; st.Sys()
['SYS']
&gt;&gt;&gt; st.Pollutants() # no pollutants in this file.
[]
&gt;&gt;&gt; wq=SWMM5Simulation(&quot;swmm5/examples/waterquality/Example5-EXP5.1.inp&quot;)
&gt;&gt;&gt; wq.SWMM_Npolluts
1
&gt;&gt;&gt; wq.Pollutants() # TSS in this case.
['TSS']
&gt;&gt;&gt; lst=st.varList(&quot;SUBCATCH&quot;)
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%4i %s&quot;% (i,v) for i,v in  enumerate(lst))) # print in a column with index.
   0 Rainfall (in/hr or mm/hr)
   1 Snow depth (in or mm)
   2 Evaporation loss (in/hr or mm/hr)
   3 Infiltration loss (in/hr or mm/hr)
   4 Runoff rate (flow units)
   5 Groundwater outflow rate (flow units)
   6 Groundwater water table elevation (ft or m)
   7 Soil Moisture (volumetric fraction, less or equal tosoil porosity)



&gt;&gt;&gt; lst=wq.varList(&quot;SUBCATCH&quot;) # for the network that has pollutants.
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%4i %s&quot;% (i,v) for i,v in  enumerate(lst))) # print in a column with index.
   0 Rainfall (in/hr or mm/hr)
   1 Snow depth (in or mm)
   2 Evaporation loss (in/hr or mm/hr)
   3 Infiltration loss (in/hr or mm/hr)
   4 Runoff rate (flow units)
   5 Groundwater outflow rate (flow units)
   6 Groundwater water table elevation (ft or m)
   7 Soil Moisture (volumetric fraction, less or equal tosoil porosity)
   8 Runoff concentration of TSS (mg/l)

&gt;&gt;&gt; lst=wq.varList(&quot;NODE&quot;)
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%4i %s&quot;% (i,v) for i,v in  enumerate(lst))) # print in a column with index.
   0 Depth of water above invert (ft or m)
   1 Hydraulic head (ft or m)
   2 Volume of stored + ponded water (ft3 or m3)
   3 Lateral inflow (flow units)
   4 Total inflow (lateral + upstream) (flow units)
   5 Flow lost to flooding (flow units)
   6 Concentration of TSS (mg/l)
&gt;&gt;&gt; lst=wq.varList(&quot;LINK&quot;)
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%4i %s&quot;% (i,v) for i,v in  enumerate(lst))) # print in a column with index.
   0 Flow rate (flow units)
   1 Flow depth (ft or m)
   2 Flow velocity (ft/s or m/s)
   3 Froude number
   4 Capacity (fraction of conduit filled)
   5 Concentration of TSS (mg/l)
&gt;&gt;&gt; lst=wq.varList(&quot;SYS&quot;)
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%4i %s&quot;% (i,v) for i,v in  enumerate(lst))) # print in a column with index.
   0 Air temperature (deg. F or deg. C)
   1 Rainfall (in/hr or mm/hr)
   2 Snow depth (in or mm)
   3 Evaporation + infiltration loss rate (in/hr or mm/hr)
   4 Runoff flow (flow units)
   5 Dry weather inflow (flow units)
   6 Groundwater inflow (flow units)
   7 RDII inflow (flow units)
   8 User supplied direct inflow (flow units)
   9 Total lateral inflow (sum of variables 4 to 8) (flow units)
  10 Flow lost to flooding (flow units)
  11 Flow leaving through outfalls (flow units)
  12 Volume of stored water (ft3 or m3)
  13 Evaporation rate (in/day or mm/day)
</pre>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Example 3:</th><td class="field-body">Results</td>
</tr>
</tbody>
</table>
<pre class="literal-block">
&gt;&gt;&gt; r=list(st.Results('NODE','J1', 4)) # total inflow into node &quot;J1&quot;. The Results function returns a generator. We convert it to a list.
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%5.2f&quot;% (i) for i in  r[0:10])) # Lets print the first 10 items.
 0.00
 0.00
 0.00
 0.03
 3.32
13.71
28.17
45.93
64.62
83.10
&gt;&gt;&gt; r=st.Results('SYS','SYS', 1)  #1 Rainfall (in/hr or mm/hr). This time we use the generator directly.
&gt;&gt;&gt; print (&quot;\n&quot;.join([&quot;%5.2f&quot;% (i) for i in  r]))  #doctest: +ELLIPSIS
 0.00
 0.00
 0.00
 7.20
 7.20
 7.20
 7.60
 7.60
 7.60
 8.00
 ...
 0.00
</pre>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Example 4:</th><td class="field-body">Pollutant Concentration</td>
</tr>
</tbody>
</table>
<pre class="literal-block">
&gt;&gt;&gt; wq.Subcatch()
['S1', 'S2', 'S3', 'S4', 'S5', 'S6', 'S7']

&gt;&gt;&gt; r=list(wq.Results('SUBCATCH','S3', 8)) # TSS out of catchment 'S3'. We convert it to a list.
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%5.2f&quot;% (i) for i in  r[0:10])) # Lets print the first 10 items.  #doctest: +REPORT_NDIFF
 0.00
 0.00
 0.00
10.00
10.00
10.00
13.45
14.11
14.71
15.24
</pre>
<pre class="literal-block">
&gt;&gt;&gt; wq.Node()
['J1', 'J2', 'J3', 'J4', 'J5', 'J6', 'J7', 'J8', 'J9', 'J10', 'J11', 'O1']

&gt;&gt;&gt; r=list(wq.Results('NODE','J3', 6)) # TSS out of Node 'J3'. We convert it to a list.
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%5.2f&quot;% (i) for i in  r[0:10])) # Lets print the first 10 items.  #doctest: +REPORT_NDIFF
 0.00
10.00
10.00
10.00
10.00
10.04
13.43
14.11
14.71
15.24

&gt;&gt;&gt; wq.Link()
['C1', 'C2', 'C3', 'C4', 'C5', 'C6', 'C7', 'C8', 'C9', 'C10', 'C11']

&gt;&gt;&gt; r=list(wq.Results('LINK','C11', 5)) # TSS out of Link 'C11'. We convert it to a list.
&gt;&gt;&gt; print (&quot;\n&quot;.join( &quot;%5.2f&quot;% (i) for i in  r)) # Lets print the first 10 items.  #doctest: +REPORT_NDIFF +ELLIPSIS
 0.00
 0.00
 1.56
 3.86
 7.64
 8.85
10.38
...
47.58
</pre>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Example 5:</th><td class="field-body">Tracking output files</td>
</tr>
</tbody>
</table>
<pre class="literal-block">
&gt;&gt;&gt; simtemp=SWMM5Simulation(&quot;swmm5/examples/simple/swmm5Example.inp&quot;)
&gt;&gt;&gt; f=simtemp.getFiles()
&gt;&gt;&gt; f #doctest: +ELLIPSIS
['swmm5/examples/simple/swmm5Example.inp', '...swmm5Example....rpt', '...swmm5Example....dat']
&gt;&gt;&gt; from os.path import isfile
&gt;&gt;&gt; [isfile(x) for x in f] # do they exist in the operating system.
[True, True, True]
&gt;&gt;&gt; simtemp.clean()
&gt;&gt;&gt; [isfile(x) for x in f] # do they exist in the operating system.
[True, False, False]
</pre>
</div>
<div class="section" id="thread-safety">
<h1>Thread Safety</h1>
<p>Calling SWMM5Simulation with input file as only argument (SWMM5Simulation will
choose the report and binary output file names) and subsequent use of the object
to retreive results is threadsafe to the degree I could verify.</p>
<p>There is a test <tt class="docutils literal">test_multithreading.py</tt> in the test directory, which can be run to test this to some degree. It should be run as <tt class="docutils literal">python test_multithreading.py</tt>.</p>
</div>
<div class="section" id="legacy-interface">
<h1>Legacy interface</h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Note:</th><td class="field-body">This is provided only for backward compatibility. Always use the new interface (above).</td>
</tr>
</tbody>
</table>
<p>import swmm5 module</p>
<pre class="literal-block">
&gt;&gt;&gt; from swmm5 import swmm5 as sw
&gt;&gt;&gt;
</pre>
<p>run a sample network</p>
<pre class="literal-block">
&gt;&gt;&gt; ret=sw.RunSwmmDll(&quot;./swmm5/examples/simple/swmm5Example.inp&quot;,&quot;swmm5Example.rpt&quot;,&quot;swmm5.dat&quot;)
&gt;&gt;&gt;
</pre>
<p>should return 0 if everything is OK (according to to swmm convension)</p>
<pre class="literal-block">
&gt;&gt;&gt; print (ret)
0
&gt;&gt;&gt;
</pre>
<p>Now it is possible to retrive results.
Open the swmm results file</p>
<pre class="literal-block">
&gt;&gt;&gt; sw.OpenSwmmOutFile(&quot;swmm5.dat&quot;)
0
&gt;&gt;&gt;
</pre>
<p>How many time steps are there?</p>
<pre class="literal-block">
&gt;&gt;&gt; sw.cvar.SWMM_Nperiods
360
&gt;&gt;&gt;
</pre>
<p>Let's retrive rainfall in the system.
Systems rainfall at fifth timestep</p>
<pre class="literal-block">
&gt;&gt;&gt; ret,x=sw.GetSwmmResult(3,0,1,5)
&gt;&gt;&gt; print ('%.2f' % x)
7.20
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="acknowlegements">
<h1>Acknowlegements</h1>
<blockquote>
<ul class="simple">
<li>David Townshend</li>
<li>Tim Cera</li>
</ul>
</blockquote>
</div>
</div>
</body>
</html>
